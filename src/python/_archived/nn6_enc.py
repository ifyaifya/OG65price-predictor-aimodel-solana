# NN 6->3 Encoder
# /sol/1=Accum, /sol/2=Scratch
f=open("/sol/1","rb")
a=list(f.read())
f.close()
p0=a[0]|a[1]<<8|a[2]<<16|a[3]<<24
p1=a[4]|a[5]<<8|a[6]<<16|a[7]<<24
p2=a[8]|a[9]<<8|a[10]<<16|a[11]<<24
sm=a[16]|a[17]<<8|a[18]<<16|a[19]<<24
I0=128
if sm>0:
    I0=128+(p0-sm)*100//sm
    if I0<0:I0=0
    if I0>255:I0=255
I1=a[21]
I2=a[20]
I3=a[22]
I4=a[23]
up=0
if p0>p1:up=up+1
if p1>p2:up=up+1
I5=85*up
W=[10,-5,2,-8,15,-3,-12,8,-1,5,-10,6,3,-7,12,-2,8,-9,50,60,45]
h0=W[18]+I0*W[0]+I1*W[1]+I2*W[2]+I3*W[3]+I4*W[4]+I5*W[5]
h1=W[19]+I0*W[6]+I1*W[7]+I2*W[8]+I3*W[9]+I4*W[10]+I5*W[11]
h2=W[20]+I0*W[12]+I1*W[13]+I2*W[14]+I3*W[15]+I4*W[16]+I5*W[17]
if h0<0:h0=0
if h1<0:h1=0
if h2<0:h2=0
if h0>65535:h0=65535
if h1>65535:h1=65535
if h2>65535:h2=65535
s=[h0&255,(h0>>8)&255,h1&255,(h1>>8)&255,h2&255,(h2>>8)&255]
g=open("/sol/2","wb")
g.write(bytes(s))
g.close()
h0
